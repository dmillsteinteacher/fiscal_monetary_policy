<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Policy Combination Simulator (MLF & AS-AD)</title>
    <style>
        /* General Styling */
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f9; }
        .container { max-width: 1000px; margin: auto; padding: 20px; background-color: #fff; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        h1 { color: #333; text-align: center; }
        .policy-section { margin-bottom: 30px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; background-color: #fafafa; }
        .policy-section h2 { color: #0056b3; border-bottom: 2px solid #0056b3; padding-bottom: 5px; margin-top: 0; }
        
        /* Slider Styling */
        .slider-group { margin-bottom: 20px; }
        .slider-group label { display: block; font-weight: bold; margin-bottom: 5px; }
        
        /* Results Grid */
        .results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .graph-panel { border: 1px solid #ccc; padding: 15px; border-radius: 6px; }
        .graph-panel h3 { margin-top: 0; color: #555; }
        
        /* Result Text Formatting */
        .result-item { font-size: 1.1em; font-weight: bold; margin: 5px 0; }
        .change-up { color: green; }
        .change-down { color: red; }
        .change-neutral { color: #555; }
        
        /* LaTeX/Variable Rendering (using HTML) */
        .mlf-r::after { content: "r"; font-style: italic; }
        .mlf-qlf::after { content: "Qlf"; font-style: italic; }
        .asad-pl::after { content: "PL"; font-style: italic; }
        .asad-rgdp::after { content: "rgdp"; font-style: italic; }
    </style>
</head>
<body>

<div class="container">
    <h1>Macro Policy Combination Simulator üìä</h1>
    <p>Use the sliders below to model the effect of Fiscal and Monetary Policy actions on the Loanable Funds (MLF) and Aggregate Supply-Aggregate Demand (AS-AD) graphs.</p>

    <div class="policy-section">
        <h2>Policy Levers üéöÔ∏è</h2>
        <div class="slider-group">
            <label for="fiscalPolicy">Fiscal Policy Impact (Affects D<span class="mlf-qlf"></span>):</label>
            <input type="range" id="fiscalPolicy" min="-10" max="10" value="0" step="1" style="width: 100%;">
            <p id="fiscalValue">Current: Neutral (0)</p>
            <small>(-10 = Contractionary/Surplus, 0 = Neutral, +10 = Expansionary/Deficit)</small>
        </div>

        <div class="slider-group">
            <label for="monetaryPolicy">Monetary Policy Impact (Affects S<span class="mlf-qlf"></span>):</label>
            <input type="range" id="monetaryPolicy" min="-10" max="10" value="0" step="1" style="width: 100%;">
            <p id="monetaryValue">Current: Neutral (0)</p>
            <small> (-10 = Contractionary, 0 = Neutral, +10 = Expansionary)</small>
        </div>
    </div>

    <hr>

    <h2>Combined Results</h2>
    <div class="results-grid">
        <div class="graph-panel">
            <h3>Market for Loanable Funds (MLF)</h3>
            <p class="result-item">Real Interest Rate (<span class="mlf-r"></span>): <span id="resultR" class="change-neutral">Neutral</span></p>
            <p class="result-item">Quantity of Loanable Funds (<span class="mlf-qlf"></span>): <span id="resultQlf" class="change-neutral">Neutral</span></p>
            <small>The MLF shows the combined effects of D<span class="mlf-qlf"></span> (Fiscal) and S<span class="mlf-qlf"></span> (Monetary) shifts.</small>
        </div>

        <div class="graph-panel">
            <h3>Aggregate Supply-Aggregate Demand (AS-AD)</h3>
            <p class="result-item">Price Level (<span class="asad-pl"></span>): <span id="resultPL" class="change-neutral">Neutral</span></p>
            <p class="result-item">Real Output (<span class="asad-rgdp"></span>): <span id="resultRgdp" class="change-neutral">Neutral</span></p>
            <small>AD shifts based on the direct fiscal effect and the indirect interest rate effect.</small>
        </div>
    </div>

    <hr>

    <div class="policy-section">
        <h2>Policy Flaw/Trade-off Commentary</h2>
        <p id="commentaryText">Select policy settings to see the resulting economic trade-off (e.g., Crowding Out, Inflation, etc.).</p>
    </div>
</div>

<script>
    const fiscalSlider = document.getElementById('fiscalPolicy');
    const monetarySlider = document.getElementById('monetaryPolicy');
    const fiscalValueText = document.getElementById('fiscalValue');
    const monetaryValueText = document.getElementById('monetaryValue');

    const resultR = document.getElementById('resultR');
    const resultQlf = document.getElementById('resultQlf');
    const resultPL = document.getElementById('resultPL');
    const resultRgdp = document.getElementById('resultRgdp');
    const commentaryText = document.getElementById('commentaryText');

    // Helper function to determine the change based on score
    function getChange(score) {
        if (score > 3) return { text: 'Significant Increase (++)', class: 'change-up' };
        if (score > 0) return { text: 'Increase (+)', class: 'change-up' };
        if (score < -3) return { text: 'Significant Decrease (--) Custome', class: 'change-down' };
        if (score < 0) return { text: 'Decrease (-)', class: 'change-down' };
        return { text: 'Neutral/Unchanged', class: 'change-neutral' };
    }

    // Main calculation function
    function updateResults() {
        const fiscal = parseInt(fiscalSlider.value); // D_LF shift (Positive = Right)
        const monetary = parseInt(monetarySlider.value); // S_LF shift (Positive = Right)

        // 1. MLF Results:
        // Interest Rate (r): Determined by the difference between D_LF and S_LF shifts.
        const r_score = fiscal - monetary; 
        const r_change = getChange(r_score);
        resultR.textContent = r_change.text;
        resultR.className = r_change.class; // Fixed: using className to apply the color

        // Quantity of Loanable Funds (Q_LF): Determined by the sum of D_LF and S_LF shifts.
        const Qlf_score = fiscal + monetary; 
        const Qlf_change = getChange(Qlf_score);
        resultQlf.textContent = Qlf_change.text;
        resultQlf.className = Qlf_change.class; // Fixed: using className to apply the color

        // 2. AS-AD Results (Short Run):
        // Aggregate Demand (AD) is driven by:
        // a) Direct Fiscal Policy (G/T) effect
        // b) Indirect Interest Rate (r) effect: lower r (+ score) increases AD
        const AD_r_component = -r_score; 
        const AD_score = fiscal + AD_r_component; 
        
        const AD_change = getChange(AD_score);
        // PL and rgdp follow AD in the short run
        resultPL.textContent = AD_change.text;
        resultPL.className = AD_change.class; // Fixed: using className to apply the color
        resultRgdp.textContent = AD_change.text;
        resultRgdp.className = AD_change.class; // Fixed: using className to apply the color
        
        // Update slider value displays
        fiscalValueText.textContent = `Current: ${fiscal > 0 ? 'Expansionary' : (fiscal < 0 ? 'Contractionary' : 'Neutral')} (${fiscal})`;
        monetaryValueText.textContent = `Current: ${monetary > 0 ? 'Expansionary' : (monetary < 0 ? 'Contractionary' : 'Neutral')} (${monetary})`;


        // 3. Commentary/Flaw Logic:
        let commentary = '';
        if (fiscal > 0 && monetary === 0) { // XFP ONLY
            commentary = `**Expansionary Fiscal Policy Only (Flaw: Crowding Out):** The Real Interest Rate (${r_change.text}) increases significantly, which will deter private investment, slowing long-run growth.`;
        } else if (fiscal < 0 && monetary === 0) { // CFP ONLY
            commentary = `**Contractionary Fiscal Policy Only (Flaw: Implementation Lag):** This policy is subject to delays (Congress/President), making it slow to enact and potentially destabilizing.`;
        } else if (fiscal === 0 && monetary > 0) { // XMP ONLY
            commentary = `**Expansionary Monetary Policy Only (Flaw: Impact Lag):** This policy is subject to a long and variable lag (6-18 months) as changes filter through the banking system to firm/consumer spending. Banks may also hoard reserves.`;
        } else if (fiscal === 0 && monetary < 0) { // CMP ONLY
            commentary = `**Contractionary Monetary Policy Only (Flaw: Slows LRAS):** The significant increase in the Real Interest Rate (${r_change.text}) deters private investment, slowing down long-run potential output.`;
        } else if (fiscal > 0 && monetary > 0) { // Combo #1: XFP + XMP (Obama)
            commentary = `**Combined Expansion (Obama Combo):** The AD shift is strong! Monetary Policy successfully **neutralizes the interest rate increase** (${r_change.text}) caused by fiscal borrowing, minimizing **Crowding Out**.`;
        } else if (fiscal < 0 && monetary < 0) { // Combo #2: CFP + CMP (Truman)
            commentary = `**Combined Contraction (Truman Combo):** The AD shift is strongly left, tackling inflation! Monetary Policy successfully **neutralizes the interest rate decrease** (${r_change.text}), preventing a counter-productive 'crowding-in' investment boom.`;
        } else if (fiscal > 0 && monetary < 0) { // Combo #3: XFP + CMP (Opposite AD/Max Crowding Out)
            commentary = `**Opposite Forces (XFP + CMP):** AD effects conflict. The strong increase in interest rates (${r_change.text}) due to both policies is a major concern, leading to **Maximum Crowding Out** and severely damaging long-run potential output.`;
        } else if (fiscal < 0 && monetary > 0) { // Combo #4: CFP + XMP (Opposite AD/Max Crowding In)
            commentary = `**Opposite Forces (CFP + XMP):** AD effects conflict. The strong decrease in interest rates (${r_change.text}) due to both policies is a major concern, potentially leading to a massive, unwanted **Investment Boom ('Crowding-In')**.`;
        } else {
             commentary = 'Select policy settings to see the resulting economic trade-off (e.g., Crowding Out, Inflation, etc.).';
        }
        commentaryText.innerHTML = commentary;
    }

    // Event Listeners
    fiscalSlider.addEventListener('input', updateResults);
    monetarySlider.addEventListener('input', updateResults);

    // Initial load
    updateResults();
</script>

</body>
</html>
